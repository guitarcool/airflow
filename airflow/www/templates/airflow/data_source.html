{#
    #
    # Licensed to the Apache Software Foundation (ASF) under one
    # or more contributor license agreements.  See the NOTICE file
    # distributed with this work for additional information
    # regarding copyright ownership.  The ASF licenses this file
    # to you under the Apache License, Version 2.0 (the
    # "License"); you may not use this file except in compliance
    # with the License.  You may obtain a copy of the License at
    # 
    #   http://www.apache.org/licenses/LICENSE-2.0
    # 
    # Unless required by applicable law or agreed to in writing,
    # software distributed under the License is distributed on an
    # "AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
    # KIND, either express or implied.  See the License for the
    # specific language governing permissions and limitations
    # under the License.
    #
    #}
    {% extends "airflow/dag.html" %}
    
    {% block head_css %}
    {{ super() }}
    <link href="{{ admin_static.url(filename='vendor/bootstrap-daterangepicker/daterangepicker-bs2.css') }}" rel="stylesheet">
    <style>
        #task_edit .table{
            width: 80%;
        }
        #task_edit td{
            position: relative;
        }
        #task_edit tr td:first-child{
            width: 20%;
        }
        #task_edit input[type="text"]{
            width: 100%;
            height: 80%;
        }
    </style>
    {% endblock %}
    
    {% block body %}
      {{ super() }}
    <form method="get" id="task_edit" class="form-inline">
        <input name="_csrf_token" type="hidden" value="{{ csrf_token() }}">
        <input type="hidden" value="{{ dag.dag_id }}" name="dag_id">
        <table class="table">
            <tr>
                <td><label>名称</label></td>
                <td>
                    <input type="text" value="{{ task_id }}">
                </td>
            </tr>
            <tr>
                <td><label>远程目录</label></td>
                <td><select name="target">
                    <option>ftp</option>
                    <option>sftp</option>
                </select></td>
            </tr>
            <tr>
                <td><label>数据库</label></td>
                <td><select name="target">
                    <option>ftp</option>
                    <option>sftp</option>
                </select></td>
            </tr>
            <tr>
                <td><label>地址</label></td>
                <td><input type="text"></td>
            </tr>
            <tr>
                <td><label>端口</label></td>
                <td><input type="text"></td>
            </tr>
            <tr>
                <td><label>用户名</label></td>
                <td><input type="text"></td>
            </tr>
            <tr>
                <td><label>密码</label></td>
                <td><input type="text"></td>
            </tr>
            <tr>
                <td><label>数据源名称</label></td>
                <td><input type="text"></td>
            </tr>
        </table>
    </form>
    {% endblock %}
    {% block tail %}
      {{ super() }}
      <script src="{{ admin_static.url(filename='vendor/bootstrap-daterangepicker/daterangepicker.js') }}"></script>
      <script src="{{ admin_static.url(filename='admin/js/form-1.0.0.js') }}"></script>
      <script>
        $( document ).ready(function() {
          function date_change(){
              execution_date = $("input#execution_date").val().replace(' ', 'T');
              loc = decodeURIComponent(window.location.href);
              loc = loc.replace('{{ execution_date }}', execution_date);
              window.location = loc;
          }
          $("input#execution_date").on("change.daterangepicker", function(){
              date_change();
          });
          $("input#execution_date").on("apply.daterangepicker", function(){
              date_change();
          });
        });
      </script>
    {% endblock %}
    